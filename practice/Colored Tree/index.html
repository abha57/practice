<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Colored Trees</title>
</head>

<body>
    <script type='text/javascript'>
    function main(input) {
        var givenInput = input;
        givenInput = givenInput.split('\n');
        var numberOfNodes = givenInput[0].split(' ')[0];
        var colors = givenInput[0].split(' ')[1];
        var parentsArray = givenInput[1].split(' ');
        var colorArray = givenInput[2].split(' ');
        var parentArrayWithSameColor = [];
        var treeNode = function(id,color){
        	this.parent = null;
        	this.color =  color;
        	this.id = Number(id);
        }
        var treeNodes = [];
        for( var i = 1; i <= numberOfNodes; i++ ){
        	treeNodes.push( new treeNode(i, Number(colorArray[i - 1])) );
        }

        var findParent = function(parent){
        	if(parent === null){
        		return null;
        	}
        	for(var i = 0; i < treeNodes.length; i++){
        		if(treeNodes[i].id === parent) return treeNodes[i];
        	}
        }
        var findParentWithSameColor = function(no, color){
        	var node = findParent(no.parent);
        	if( node &&  node.color === color ){
        		return node.id;
        	}
        	else if(node && node.parent){
        		return findParentWithSameColor(node.parent, color);
        	}
        	else{
        		return -1;
        	}
        };

        (function allottingParents(){
        	treeNodes.forEach(function(node, index){
        		if( node.id === 1 ){
        			node.parent = null;
        		}
        		else{
        			node.parent = Number(parentsArray[index - 1]);
        		}
        		var parentWithSameColor = findParentWithSameColor(node, node.color);
        		parentArrayWithSameColor.push(parentWithSameColor);
        		console.log(parentArrayWithSameColor);
        	});
        })();
        console.log(parentArrayWithSameColor);

       

    }
    main("5 4\n1 1 3 3\n1 4 2 1 2");
    </script>
</body>

</html>
