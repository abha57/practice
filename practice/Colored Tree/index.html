<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Colored Trees</title>
</head>

<body>
    <script type='text/javascript'>
    function main(input) {
        var givenInput = input;
        givenInput = givenInput.split('\n');
        var numberOfNodes = givenInput[0].split(' ')[0];
        var colors = givenInput[0].split(' ')[1];
        var parentsArray = givenInput[1].split(' ');
        var colorArray = givenInput[2].split(' ');
        var parentArrayWithSameColor = "";
        parentArrayWithSameColor += "-1";

        var TreeNode = function(id, color, parentNumber) {
            var parentNode = function(parentNumber) {
                if (parentNumber === null) {
                    return null;
                } else {
                    for (var i = 0; i < treeNodes.length; i++) {
                        if (treeNodes[i].id === parentNumber) return treeNodes[i];
                    }
                }
            }
            this.parent = parentNode(parentNumber);
            this.color = color;
            this.id = Number(id);
        }


        var treeNodes = [];
        for (var i = 1; i <= numberOfNodes; i++) {
            if (i === 1) {
                treeNodes.push(new TreeNode(1, Number(colorArray[i - 1]),null));
            }
            else{
            treeNodes.push(new TreeNode(i, Number(colorArray[i - 1]),  Number(parentsArray[i - 2])));    
            }
        }

        var findParentWithSameColor = function(no, color) {
            if (no.parent && no.parent.color === color) {
                return no.parent.id;
            } else if (no.parent) {
                return findParentWithSameColor(no.parent, color);
            } else {
                return -1;
            }
        };

        (function parentWithSameColor() {
            treeNodes.forEach(function(node, index) {
               if(node.id !== 1){
                var parentNumber = String(findParentWithSameColor(node, node.color));
                parentArrayWithSameColor += (" " + parentNumber);
               }
            });
            console.log(parentArrayWithSameColor);
        })();



    }
    main("5 4\n1 1 3 3\n1 4 2 1 2");
    </script>
</body>

</html>
